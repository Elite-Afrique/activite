"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[318],{546:(S,w,c)=>{c.r(w),c.d(w,{FinanceModule:()=>H});var y=c(4521),Z=c(7423),F=c(4834),C=c(5245),E=c(2181),b=c(5899),x=c(4847),l=c(4999),D=c(7e3),A=c(4466),T=c(9808),s=c(3075),n=c(520),e=c(5e3),a=c(3192),h=c(4713),d=c(7322),u=c(7531);const _=["recentTransactionsTable"];function p(t,o){1&t&&(e.TgZ(0,"th",49),e._uU(1," Id "),e.qZA())}function m(t,o){if(1&t&&(e.TgZ(0,"td",50)(1,"span",51),e._uU(2),e.qZA()()),2&t){const i=o.$implicit;e.xp6(2),e.hij(" ",i.id," ")}}function f(t,o){1&t&&(e.TgZ(0,"th",49),e._uU(1," Date "),e.qZA())}function g(t,o){if(1&t&&(e.TgZ(0,"td",50)(1,"span",52),e._uU(2),e.ALo(3,"date"),e.qZA()()),2&t){const i=o.$implicit;e.xp6(2),e.hij(" ",e.xi3(3,1,i.updated_at,"dd MMM")," ")}}function U(t,o){1&t&&(e.TgZ(0,"th",49),e._uU(1," Besoin exprim\xe9 "),e.qZA())}function k(t,o){if(1&t&&(e.TgZ(0,"td",50)(1,"span",52),e._uU(2),e.qZA()()),2&t){const i=o.$implicit;e.xp6(2),e.hij(" ",i.body," ")}}function B(t,o){1&t&&(e.TgZ(0,"th",49),e._uU(1," Statut "),e.qZA())}function I(t,o){1&t&&(e.TgZ(0,"span",55),e._uU(1,"Valider"),e.qZA())}function N(t,o){1&t&&(e.TgZ(0,"span",55),e._uU(1,"Rejeter"),e.qZA())}function Q(t,o){1&t&&(e.TgZ(0,"span",55),e._uU(1,"..."),e.qZA())}const Y=function(t,o,i){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":t,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":o,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-green-50":i}};function q(t,o){if(1&t&&(e.TgZ(0,"td",50)(1,"span",53),e.YNc(2,I,2,0,"span",54),e.YNc(3,N,2,0,"span",54),e.YNc(4,Q,2,0,"span",54),e.qZA()()),2&t){const i=o.$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(4,Y,1==i.rejetstatut,1==i.validstatut,0===i.validstatut&&0==i.rejetstatut)),e.xp6(1),e.Q6J("ngIf",1==i.validstatut),e.xp6(1),e.Q6J("ngIf",1==i.rejetstatut),e.xp6(1),e.Q6J("ngIf",0==i.validstatut&&0==i.rejetstatut)}}function J(t,o){1&t&&e._UZ(0,"td",56)}function M(t,o){1&t&&e._UZ(0,"tr",57)}function O(t,o){1&t&&e._UZ(0,"tr",58)}function V(t,o){1&t&&e._UZ(0,"tr",59)}const R=function(){return["recentOrdersTableFooter"]};function j(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div")(3,"h2",5),e._uU(4,"Mes besoins"),e.qZA()(),e.TgZ(5,"div",6)(6,"button",7),e.NdJ("click",function(){return e.CHM(i),e.oxw().openPopup()}),e._UZ(7,"mat-icon",8),e.TgZ(8,"span",9),e._uU(9,"Nouveau besoin"),e.qZA()(),e.TgZ(10,"div",10)(11,"button",11),e._UZ(12,"mat-icon",12),e.qZA()()()(),e.TgZ(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16),e._UZ(17,"mat-icon",17),e.qZA(),e.TgZ(18,"div",18)(19,"div",19)(20,"div",20),e._uU(21,"Besoins accept\xe9s"),e.qZA(),e._UZ(22,"div",21),e.qZA()(),e.TgZ(23,"div",22)(24,"div",23)(25,"div",24),e._uU(26,"Nombre de besoins"),e.qZA(),e.TgZ(27,"div",25),e._uU(28),e.qZA()()()(),e.TgZ(29,"div",15)(30,"div",16),e._UZ(31,"mat-icon",26),e.qZA(),e.TgZ(32,"div",18)(33,"div",19)(34,"div",20),e._uU(35,"Besoins en cours"),e.qZA(),e._UZ(36,"div",27),e.qZA()(),e.TgZ(37,"div",22)(38,"div",23)(39,"div",24),e._uU(40,"Nombre de besoins"),e.qZA(),e.TgZ(41,"div",28),e._uU(42),e.qZA()()()(),e.TgZ(43,"div",15)(44,"div",16),e._UZ(45,"mat-icon",29),e.qZA(),e.TgZ(46,"div",18)(47,"div",19)(48,"div",20),e._uU(49,"Besoins rejet\xe9s"),e.qZA(),e._UZ(50,"div",30),e.qZA()(),e.TgZ(51,"div",22)(52,"div",23)(53,"div",24),e._uU(54,"Nombre de besoins"),e.qZA(),e.TgZ(55,"div",31),e._uU(56),e.qZA()()()()()(),e.TgZ(57,"div",32)(58,"div",33)(59,"div",34)(60,"div",35),e._uU(61,"Liste et statut des besoins Personnels"),e.qZA()(),e.TgZ(62,"div",36)(63,"table",37),e.ynx(64,38),e.YNc(65,p,2,0,"th",39),e.YNc(66,m,3,1,"td",40),e.BQk(),e.ynx(67,41),e.YNc(68,f,2,0,"th",39),e.YNc(69,g,4,4,"td",40),e.BQk(),e.ynx(70,42),e.YNc(71,U,2,0,"th",39),e.YNc(72,k,3,1,"td",40),e.BQk(),e.ynx(73,43),e.YNc(74,B,2,0,"th",39),e.YNc(75,q,5,8,"td",40),e.BQk(),e.ynx(76,44),e.YNc(77,J,1,0,"td",45),e.BQk(),e.YNc(78,M,1,0,"tr",46),e.YNc(79,O,1,0,"tr",47),e.YNc(80,V,1,0,"tr",48),e.qZA()()()()()}if(2&t){const i=e.oxw();e.xp6(6),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:check-circle"),e.xp6(11),e.Oqu(i.besoinCount.valider),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:minus-circle"),e.xp6(11),e.Oqu(i.besoinCount.encours),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:exclamation-circle"),e.xp6(11),e.Oqu(i.besoinCount.rejeter),e.xp6(7),e.Q6J("dataSource",i.recentTransactionsDataSource),e.xp6(15),e.Q6J("matHeaderRowDef",i.recentTransactionsTableColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.recentTransactionsTableColumns),e.xp6(1),e.Q6J("matFooterRowDef",e.DdM(13,R))}}function z(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"div",32)(1,"div",60)(2,"div",18)(3,"div",19)(4,"div",35),e._uU(5,"Exprimer un nouveau besoin"),e.qZA()(),e.TgZ(6,"div",61)(7,"button",62),e.NdJ("click",function(){return e.CHM(i),e.oxw().closePopup()}),e._UZ(8,"mat-icon",63),e.qZA()()(),e.TgZ(9,"form",64)(10,"div",65)(11,"mat-form-field",66)(12,"mat-label"),e._uU(13,"De quoi avez-vous besoin ?"),e.qZA(),e._UZ(14,"input",67),e.qZA()(),e.TgZ(15,"div",68)(16,"button",69),e.NdJ("click",function(){return e.CHM(i),e.oxw().submitProgrammeSup()}),e.TgZ(17,"span",70),e._uU(18,"Soumettre"),e.qZA()()()()()()}if(2&t){const i=e.oxw();e.xp6(8),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(1),e.Q6J("formGroup",i.addBesoinForm),e.xp6(5),e.Q6J("formControlName","body"),e.xp6(2),e.Q6J("color","primary")}}const P=[{path:"",component:(()=>{class t{constructor(i,r,v,G,L,X){this.param=i,this._changeDetectorRef=r,this._document=v,this._financeService=G,this._formBuilder=L,this.http=X,this.usr_id=localStorage.getItem("usr_id"),this.besoinCount={valider:0,rejeter:0,encours:0},this.recentTransactionsTableColumns=["Id","date","contenu","statut"],this.displayAddBesoin=!1,this.displayBesoin=!0}ngOnInit(){this.http.get(this.param.url+"/getbesoins").subscribe(i=>{this.recentTransactionsDataSource=i,this.recentTransactionsDataSource=this.recentTransactionsDataSource.filter(r=>r.user_id==this.usr_id),this.besoinCount.valider=this.recentTransactionsDataSource.filter(r=>1==r.validstatut).length,this.besoinCount.rejeter=this.recentTransactionsDataSource.filter(r=>1==r.rejetstatut).length,this.besoinCount.encours=this.recentTransactionsDataSource.filter(r=>0==r.validstatut&&0==r.rejetstatut).length}),this.addBesoinForm=this._formBuilder.group({user_id:["",s.kI.required],body:["",s.kI.required],validstatut:[""],rejetstatut:[""],executstatut:[""]}),this._changeDetectorRef.markForCheck()}submitProgrammeSup(){const i={headers:new n.WM({Accept:"application/json"})};this.addBesoinForm=this._formBuilder.group({user_id:[this.usr_id,s.kI.required],body:[this.addBesoinForm.controls.body.value,s.kI.required],validstatut:[0],rejetstatut:[0],executstatut:[0]}),this.http.post(this.param.url+"/addbesoins",this.addBesoinForm.value,i).subscribe(r=>{null!=r&&this.ngOnInit()}),this.addBesoinForm.reset(),this.closePopup()}openPopup(){this.displayAddBesoin=!0,this.displayBesoin=!1}closePopup(){this.displayAddBesoin=!1,this.displayBesoin=!0,this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(a.m),e.Y36(e.sBO),e.Y36(T.K0),e.Y36(h.w),e.Y36(s.qu),e.Y36(n.eN))},t.\u0275cmp=e.Xpm({type:t,selectors:[["finance"]],viewQuery:function(i,r){if(1&i&&e.Gf(_,5,x.YE),2&i){let v;e.iGM(v=e.CRH())&&(r.recentTransactionsTableMatSort=v.first)}},decls:3,vars:2,consts:[[1,"flex","flex-col","flex-auto","w-full"],["class","flex flex-wrap w-full max-w-screen-xl mx-auto p-6 md:p-8",4,"ngIf"],["class","grid grid-cols-1 xl:grid-cols-3 gap-8 w-full mt-8",4,"ngIf"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"sm:hidden"],["mat-icon-button",""],[3,"svgIcon"],[1,"grid","grid-cols-1","xl:grid-cols-2","gap-8","w-full","mt-8"],[1,"grid","gap-8","sm:grid-flow-col","xl:grid-flow-row"],[1,"relative","flex","flex-col","flex-auto","p-6","pr-3","pb-3","bg-card","rounded-2xl","shadow","overflow-hidden"],[1,"absolute","bottom-0","right-0","w-24","h-24","-m-6"],[1,"icon-size-24","opacity-25","text-green-500","dark:text-green-400",3,"svgIcon"],[1,"flex","items-center"],[1,"flex","flex-col"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"text-green-600","font-medium","text-sm"],[1,"flex","flex-row","flex-wrap","mt-4","-mx-6"],[1,"flex","flex-col","mx-6","my-3"],[1,"text-sm","font-medium","leading-none","text-secondary"],[1,"text-green-600","mt-2","font-medium","text-3xl","leading-none"],[1,"icon-size-24","opacity-25","text-yellow-500","dark:text-yellow-400",3,"svgIcon"],[1,"text-yellow-600","font-medium","text-sm"],[1,"text-yellow-600","mt-2","font-medium","text-3xl","leading-none"],[1,"icon-size-24","opacity-25","text-red-500","dark:text-red-400",3,"svgIcon"],[1,"text-red-600","font-medium","text-sm"],[1,"text-red-600","mt-2","font-medium","text-3xl","leading-none"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8","w-full","mt-8"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"p-6"],[1,"mr-4","text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"overflow-x-auto","mx-6"],["mat-table","","matSort","",1,"w-full","bg-transparent",3,"dataSource"],["matColumnDef","Id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","contenu"],["matColumnDef","statut"],["matColumnDef","recentOrdersTableFooter"],["class","py-6 px-0 border-0","mat-footer-cell","","colspan","6",4,"matFooterCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["class","h-16 border-0","mat-footer-row","",4,"matFooterRowDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"pr-6","font-medium","text-sm","text-secondary","whitespace-nowrap"],[1,"pr-6","whitespace-nowrap"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],["class","leading-relaxed whitespace-nowrap",4,"ngIf"],[1,"leading-relaxed","whitespace-nowrap"],["mat-footer-cell","","colspan","6",1,"py-6","px-0","border-0"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],["mat-footer-row","",1,"h-16","border-0"],[1,"sm:col-span-6","flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"ml-auto","-mt-2","-mr-2"],["mat-icon-button","",3,"click"],[1,"icon-size-5","text-red-600",3,"svgIcon"],[1,"flex","flex-col","w-full",3,"formGroup"],[1,"flex","flex-col","w-full","lg:w-full","sm:pl-8"],[1,"w-full"],["matInput","",3,"formControlName"],[1,"flex","shrink-0","items-center","mt-6","sm:mt-0","sm:ml-4"],["mat-flat-button","",1,"ml-4",3,"color","click"],[1,"ml-2","mr-1"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,j,81,14,"div",1),e.YNc(2,z,19,4,"div",2),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.displayBesoin),e.xp6(1),e.Q6J("ngIf",r.displayAddBesoin))},directives:[T.O5,Z.lW,C.Hw,l.BZ,x.YE,l.w1,l.fO,l.ge,x.nU,l.Dz,l.ev,T.mk,l.mD,l.yh,l.as,l.XQ,l.nj,l.Gk,l.Ke,l.Q2,s._Y,s.JL,s.sg,d.KE,d.hX,u.Nt,s.Fj,s.JJ,s.u],pipes:[T.uU],encapsulation:2}),t})(),resolve:{data:(()=>{class t{constructor(i){this._financeService=i}resolve(i,r){return this._financeService.getData()}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(h.w))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let H=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[y.Bz.forChild(P),Z.ot,F.t,C.Ps,E.Tx,b.Cv,x.JX,l.p0,D.X,A.m,d.lN,u.c]]}),t})()},449:(S,w,c)=>{c.d(w,{Ov:()=>l,A8:()=>A,yy:()=>b,eX:()=>x,k:()=>T,Z9:()=>C});var y=c(7579),Z=c(5e3);function C(s){return s&&"function"==typeof s.connect}class b{applyChanges(n,e,a,h,d){n.forEachOperation((u,_,p)=>{let m,f;if(null==u.previousIndex){const g=a(u,_,p);m=e.createEmbeddedView(g.templateRef,g.context,g.index),f=1}else null==p?(e.remove(_),f=3):(m=e.get(_),e.move(m,p),f=2);d&&d({context:null==m?void 0:m.context,operation:f,record:u})})}detach(){}}class x{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(n,e,a,h,d){n.forEachOperation((u,_,p)=>{let m,f;null==u.previousIndex?(m=this._insertView(()=>a(u,_,p),p,e,h(u)),f=m?1:0):null==p?(this._detachAndCacheView(_,e),f=3):(m=this._moveView(_,p,e,h(u)),f=2),d&&d({context:null==m?void 0:m.context,operation:f,record:u})})}detach(){for(const n of this._viewCache)n.destroy();this._viewCache=[]}_insertView(n,e,a,h){const d=this._insertViewFromCache(e,a);if(d)return void(d.context.$implicit=h);const u=n();return a.createEmbeddedView(u.templateRef,u.context,u.index)}_detachAndCacheView(n,e){const a=e.detach(n);this._maybeCacheView(a,e)}_moveView(n,e,a,h){const d=a.get(n);return a.move(d,e),d.context.$implicit=h,d}_maybeCacheView(n,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(n);else{const a=e.indexOf(n);-1===a?n.destroy():e.remove(a)}}_insertViewFromCache(n,e){const a=this._viewCache.pop();return a&&e.insert(a,n),a||null}}class l{constructor(n=!1,e,a=!0){this._multiple=n,this._emitChanges=a,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new y.x,e&&e.length&&(n?e.forEach(h=>this._markSelected(h)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...n){this._verifyValueAssignment(n),n.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...n){this._verifyValueAssignment(n),n.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(n){this.isSelected(n)?this.deselect(n):this.select(n)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(n){return this._selection.has(n)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){this.isSelected(n)||(this._multiple||this._unmarkAll(),this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){}}let A=(()=>{class s{constructor(){this._listeners=[]}notify(e,a){for(let h of this._listeners)h(e,a)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(a=>e!==a)}}ngOnDestroy(){this._listeners=[]}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275prov=Z.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const T=new Z.OlP("_ViewRepeater")}}]);